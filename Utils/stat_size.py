import os
import statistics

""" Arguments management """
parser = argparse.ArgumentParser(prog='stat_size.py', description="Check size of different families")
parser.add_argument("input", help="Input directory path for dataset") 
args = parser.parse_args()


with open('out_size.csv', 'w') as outfile:
    csvwriter = csv.writer(outfile, delimiter=',')

    # Create the header
    names = ['family', 'mean_size', 'stdev', 'median', 'sizes']
    csvwriter.writerow(names)
        
    for root, dirs, files in os.walk(args.input):
        for directory in dirs:
            mean = 0
            var = 0
            median = 0
            sizes = []
            dir_path = os.path.join(root, dirs)
            
            for root, dirs, files in os.walk(dir_path):
                for filename in files:
                    file_path = os.path.join(root, filename)
                    sizes.append(os.path.getsize(filepath))    
            median = statistics.median(sizes)
            mean = statistics.mean(sizes)
            stdev = statistics.stdev(sizes)        
            csvwriter.writerow([directory,mean,stdev,median,sizes])
